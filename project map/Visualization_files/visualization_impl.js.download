google.maps.__gjsload__('visualization_impl', function(_){var D3=function(){if(null!=C3)return C3;var a=window.document.createElement("canvas");return C3=!(!a.getContext||!a.getContext("2d"))},E3=function(a){for(var b=Array(a),c=0;c<a;++c)b[c]=0;c=Array(a);for(var d=0;d<a;++d)c[d]=b.concat();return c},F3=function(a){if(!a||!a.getLength())return 1;var b=new _.Q;a.forEach(function(a){a&&b.extend(a.location?a.location:a)});var c=b.l.j,d=b.j.j,e=Math.max(b.l.l-c,b.j.l-d);if(1E-9>e){var f=0;a.forEach(function(a){a instanceof _.P?++f:f+=a.weight});return Math.max(1,
f)}var g=800/e,h=E3(800),k=1;a.forEach(function(a){if(a){var b=a.location?a.location:a;a=a.weight||1;b=new _.N(Math.max(0,Math.min(799,Math.floor((b.lat()-c)*g))),Math.max(0,Math.min(799,Math.floor((b.lng()-d)*g))));h[b.x][b.y]+=a;k=Math.max(k,h[b.x][b.y])}});return k},H3=function(a,b){var c=[],d=[],e=1E3/(a.length-1);_.C(a,function(a,b){c.push(b*e);d.push(_.oH(a))});a=Array(1001);for(var f=0,g=0;1001>g;++g)g>c[f+1]&&++f,a[g]=f<c.length-1?G3(e*f,g,e*(f+1),d[f],d[f+1]):d[d.length-1],a[g].alpha*=b,
a[g].alpha=_.wc(Math.floor(255*a[g].alpha),0,255);return a},G3=function(a,b,c,d,e){if(a==c)return d;a=(b-a)/(c-a);return new _.lH(Math.floor((e.m-d.m)*a+d.m),Math.floor((e.l-d.l)*a+d.l),Math.floor((e.j-d.j)*a+d.j),(e.alpha-d.alpha)*a+d.alpha)},I3=function(a,b){this.A=a;this.l=b;this.j=1;this.m=[]},K3=function(a,b,c){_.Ik(b.ba,"");if(D3()){var d=b.ownerDocument,e,f=e=d.createElement("canvas");_.Nk(f);f.width=f.height=256;f=f.getContext("2d");var g=1<a.j;b.ba.appendChild(e);b=J3(a,b);e=a.m;for(var h=
Math.floor(e.length/2),k=b.length,m=k-h,p=E3(k),q=0;q<k;++q)for(var t=b[q],v=p[q],u=0;u<k;++u){var w=t[u];if(w)for(var y=u-h,B=Math.min(m,u+h+1),D=Math.max(h,y);D<B;++D)v[D]+=w*e[D-y]}b=E3(k-2*h);for(q=0;q<k;++q)for(t=p[q],v=Math.max(h,q-h),u=Math.min(m,q+h+1),w=q-h,y=h,B=0;y<m;++y,++B)if(D=t[y])for(var E=v;E<u;++E)b[E-h][B]+=D*e[E-w];e=Math.ceil(256/a.j);e=f.createImageData(e,e);h=a.get("gradient");k=h[h.length-1];c=h.length/c;m=e.data;q=p=0;for(t=b.length;q<t;++q)for(v=b[q],u=0,w=v.length;u<w;++u)(y=
v[u])||h[0].alpha?(y=h[Math.floor(y*c)]||k,m[p++]=y.m,m[p++]=y.l,m[p++]=y.j,m[p++]=y.alpha):p+=4;g?(d=d.createElement("canvas"),d.width=d.height=256/a.j,d.getContext("2d").putImageData(e,0,0),f.scale(a.j,a.j),f.drawImage(d,0,0)):f.putImageData(e,0,0)}},J3=function(a,b){var c=a.get("projection");c=_.jl(c);var d=a.get("radius");d=Math.round(d/a.j)*a.j;var e=b.Fb,f=(256+2*d)/a.j,g=E3(f),h;for(h in e){var k=e[h],m=c.fromLatLngToPoint(new _.P(k.U,k.W,!0)),p=c.fromLatLngToPoint(new _.P(k.X,k.Y,!0)),q=null;
q=_.Jj(a.l,new _.Wc(m.x,m.y),b.zoom,_.na());p=_.Jj(a.l,new _.Wc(p.x,p.y),b.zoom,_.na());m=d/256;q=_.Ij(a.l,{O:Math.min(q.O,p.O)+m,P:Math.min(q.P,p.P)+m,$:b.zoom});q=new _.N(q.M,q.N);k=a.A.search(k);p=0;for(m=k.length;p<m;++p){var t=k[p],v=c.fromLatLngToPoint(new _.P(t.pa.x,t.pa.y)),u=0,w=0;v=_.yu(a.l,new _.Wc(v.x,v.y),new _.Wc(q.x,q.y),b.zoom);u=Math.floor(256*v.O);w=Math.floor(256*v.P);v=Math.floor((w+d)/a.j);u=Math.floor((u+d)/a.j);0<=v&&v<f&&0<=u&&u<f&&(g[v][u]+=t.weight)}}return g},P3=function(a,
b){b=void 0===b?_.Wi:b;_.hh.call(this);var c=this;this.A=b;this.D=new _.O(256,256);this.aa={};b=_.cd(-100,-300,100,300);this.B=new _.cC(b,void 0);b=_.cd(-90,-180,90,180);this.l=_.jH(b,function(a,b){return a.pa.equals(b.pa)&&a.weight==b.weight});this.L=[];this.C=new _.Sd;this.j=0;this.m=new I3(this.l,this.A);this.m.bindTo("projection",this,"projection",!0);this.m.bindTo("gradient",this,"gradient",!0);this.m.bindTo("radius",this,"radius",!0);a(this.C,function(a){return K3(c.m,a,c.j)});this.I=new _.Kn(function(){var a=
c.j;c.j=L3(c);_.yc(a,c.j)||M3(c)},0);this.addListener("data_changed",function(){return N3(c)});this.addListener("maxintensity_changed",function(){c.j=L3(c);M3(c)});this.addListener("gradient_changed",function(){M3(c)});this.addListener("opacity_changed",function(){var a=c.get("opacity"),b;for(b in c.aa)c.aa.hasOwnProperty(b)&&_.wv(c.aa[b].ba,a)});this.addListener("radius_changed",function(){for(var a in c.aa)if(c.aa.hasOwnProperty(a)){var b=c.aa[a],f=void 0,g=b.Fb;for(f in g)g.hasOwnProperty(f)&&
c.B.remove(g[f]);b.Fb={};O3(c,b)}M3(c)});this.triggersTileLoadEvent=!0},O3=function(a,b){var c={O:b.fa.x,P:b.fa.y,$:b.zoom},d=a.get("radius"),e=_.jl(a.get("projection")),f=_.Ij(a.A,c);f=new _.N(f.M,f.N);d=_.Kj(a.A,c,d/256);c=d.min;d=d.max;c=_.cd(c.M,c.N,d.M,d.N);_.kH(c,e,f,function(c){c.j=b;b.Fb[_.Cd(c)]=c;_.dC(a.B,c)})},L3=function(a){var b=a.get("maxIntensity");return 1<=b?b:F3(a.get("data"))},N3=function(a){a.l.clear();var b=a.get("data");b&&(b.forEach(function(b){b&&_.iH(a.l,Q3(b))}),a.I.Ma());
M3(a);for(var c=_.ua(a.L),d=c.next();!d.done;d=c.next())_.R.removeListener(d.value);a.L=b?[b.addListener("insert_at",function(b){return R3(a,b)}),b.addListener("remove_at",function(b,c){return S3(a,c)}),b.addListener("set_at",function(b,c){S3(a,c);R3(a,b)})]:[]},R3=function(a,b){if(b=a.get("data").getAt(b))b=Q3(b),_.iH(a.l,b),a.I.Ma(),T3(a,b.pa)},S3=function(a,b){b&&(b=Q3(b),a.l.remove(b),a.I.Ma(),T3(a,b.pa))},T3=function(a,b){b=_.fC(a.B,b);b=_.ua(b);for(var c=b.next();!c.done;c=b.next())_.Td(a.C,
c.value.j)},M3=function(a){for(var b in a.aa)a.aa.hasOwnProperty(b)&&_.Td(a.C,a.aa[b])},Q3=function(a){var b=a.location?a.location:a;a=a.weight||1;return{pa:new _.N(b.lat(),b.lng()),weight:a}},U3=function(a,b){var c=new _.OA(_.QA(250));this.aa=a;a.j=(0,_.z)(this.l,this);this.A=b;this.j=c},V3=_.l(),C3,W3="rgba(102, 255, 0, 0);rgba(102, 255, 0, 1);rgba(147, 255, 0, 1);rgba(193, 255, 0, 1);rgba(238, 255, 0, 1);rgba(244, 227, 0, 1);rgba(249, 198, 0, 1);rgba(255, 170, 0, 1);rgba(255, 113, 0, 1);rgba(255, 57, 0, 1);rgba(255, 0, 0, 1)".split(";");_.A(I3,_.S);I3.prototype.radius_changed=function(){var a=this.get("radius");D3()?this.j=20>a?1:2:this.j=4;a=Math.round(a/this.j);for(var b=a/3,c=[],d=-a;d<=a;d++)c.push(Math.exp(-d*d/(2*b*b)));this.m=c};_.dj(P3,_.hh);P3.prototype.Na=function(){return{tileSize:{J:this.D.width,K:this.D.height},ga:this.A,cb:!0,fb:2,Va:this.da.bind(this)}};
P3.prototype.da=function(a,b){var c=this;b=void 0===b?{}:b;var d=void 0===b.za?_.l():b.za,e=void 0===b.Oa?_.l():b.Oa,f=!1,g=window.document.createElement("div");_.ne(g,this.D);b=this.get("opacity");void 0!==b&&_.wv(g,b);var h={ba:g,zoom:a.$,fa:new _.N(a.O,a.P),Fb:{},ownerDocument:window.document};g.Ba=h;this.aa[_.Cd(h)]=h;O3(this,h);this.j||(this.j=L3(this));K3(this.m,h,this.j);_.Fb(function(){f=!0;d()});return{Da:function(){return g},Bb:function(){return f},fa:a,release:function(){_.Ik(g,"");delete c.aa[_.Cd(h)];
e()},freeze:_.l()}};P3.prototype.releaseTile=function(a){if(a){var b=a.Ba;a.Ba=null;delete this.aa[_.Cd(b)];a=this.B;for(var c in b.Fb)b.Fb.hasOwnProperty(c)&&a.remove(b.Fb[c]);_.Ik(b.ba,"")}};U3.prototype.l=function(){_.PA(this.j,(0,_.z)(this.m,this))};U3.prototype.m=function(){a:{var a=this.aa.l;for(var b in a){a=a[b];this.aa.remove(a);break a}a=null}a&&this.A(a)};V3.prototype.j=function(a){var b=a.m,c=a.m=a.get("map");b&&(a.j&&(a.j.unbindAll(),a.j=null),a.l&&(a.l.release(),a.l=null),_.Om("Lh","-p",a));if(c){var d=function(){k&&k.unbindAll();k=new P3(g,h);c&&k.bindTo("projection",c);k.bindTo("data",a);k.bindTo("maxIntensity",a);k.bindTo("gradient",e,"colorGradient");k.bindTo("radius",f,"renderingRadius");a.j&&(k.bindTo("opacity",a.j),e.set("opacity",1))};a.j=new _.Wq({dissipating:!0,gradient:W3,opacity:.6,radius:10});a.j.bindTo("dissipating",a);a.j.bindTo("gradient",
a);a.j.bindTo("opacity",a);a.j.bindTo("radius",a);var e=new _.nw(["stringGradient","opacity"],"colorGradient",function(a,b){return H3(a,b)});e.bindTo("stringGradient",a.j,"gradient",!0);var f=new _.nw(["radius","dissipating","zoom"],"renderingRadius",function(a,b,c){return b?a:Math.min(Math.round(a*Math.pow(2,c)),256)});f.bindTo("radius",a.j);f.bindTo("zoom",c);f.bindTo("dissipating",a.j);var g=function(a,b){new U3(a,b)};b=c.__gm;var h=void 0,k=null;d();var m=k.Na(),p=_.Zd(m);b.j.then(function(a){a.Pc.ja(function(a){a&&
h!=a.ga&&(h=a.ga,d(),p.set(k.Na()))})});_.aC(c,p,"overlayLayer",15,{Oh:function(b){a.l&&a.l.release();a.l=b}});_.Lm(c,"Lh");_.Nm("Lh","-p",a)}};_.He("visualization_impl",new V3);});
